{% extends 'base.html' %}

{% load static %}

{% block title %}Kaboom - Comics{% endblock %}

{% block content %}
<style>
    .card-tracker {
        height: 310px;
        width: 310px;
        overflow: hidden;
        margin-right: 5px !important;
        padding: 0px !important;
        border-radius: 10px;
    }

    .details {
        white-space: normal;
    }

    .card-tracker .card-text {
        z-index: 4;
        position: relative;
    }

    .card-tracker .card-gradient {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
    }

    .testimonial-group>.row {
        margin: 0px !important;
        padding-bottom: 10px;
        overflow-x: auto;
        white-space: nowrap;
    }

    .card-tracker .card-format {
        position: absolute;
        min-width: 38px;
        text-align: center;
        padding: 2px 5px;
        top: 5px;
        left: 5px;
    }

    .itm-img-container {
        width: 100%;
        height: 200px;
        overflow: hidden;
    }

    .itm-img {
        width: 100%;
        height: 100%;
        max-width: 200px;
        object-fit: contain;
    }
</style>

<div class="container section">
    <h5 id="comic-details"><span class="badge kaboom-badge fore-kaboom">Newly Added Comics</span></h5>
    <div class="testimonial-group">
        <div id="testimonial" class="row flex-nowrap">
            {% for comic in last_created %}
            <div class="card card-tracker bg-light">
                {% if comic.cover_image %}
                <img src="{{ comic.cover_image }}" class="card-img" alt="{{ comic.name }} poster">
                {% else %}
                <img src="{% static 'images/noimage.png' %}" alt="No Image" class="card-img">
                {% endif %}
                <a href="{% url 'comic' comic.id comic.slug %}" class="stretched-link" title="{{ comic.name }} ({{ comic.date_started.year }})">{{ comic.name }}</a>
                <div class="card-img-overlay d-flex card-bottom-panel">
                    <div class="d-flex align-self-end flex-column w-100">
                        <div class="card-format">
                            <span class="badge bg-kaboom fore-kaboom">{{ comic.media_format }}</span>
                        </div>
                        <div class="card-back card-text details">
                            <h5 class="card-text fore-kaboom item-name">{{ comic.name }}</h5>
                            {% if comic.publisher %}
                            <p style="font-size: smaller; margin: 0px;">
                                <a href="{% url 'publisher' comic.publisher.id comic.publisher.slug %}" class="link">
                                    {{ comic.publisher.name }}
                                </a>
                            </p>
                            {% endif %}
                        </div>
                        <div class="card-gradient"
                            style="background: linear-gradient(rgba(255, 95, 109, 0.1) 0%, rgba(255, 95, 109, 0.7) 77%);">
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="space-between">
            <button id="btnLeft" style="border: none; background-color: white;"><h5><i class="fa-solid fa-arrow-left" style="color: rgba(255, 95, 109, 1);"></i></h5></button>
            <button id="btnRight" style="border: none; background-color: white;"><h5><i class="fa-solid fa-arrow-right" style="color: rgba(255, 95, 109, 1);"></i></h5></button>
        </div>
        <script>
            btnLeft = document.getElementById("btnLeft");
            btnRight = document.getElementById("btnRight");

            testimonial = document.getElementById("testimonial");

            btnRight.onclick = function () {
                testimonial.scrollLeft += 315;
            }
            btnLeft.onclick = function () {
                testimonial.scrollLeft -= 315;
            }
        </script>
    </div>
</div>
<div class="container section">
    <h5 id="comic-details"><span class="badge kaboom-badge fore-kaboom">Publishers</span></h5>
    <div class="row">
        {% for publisher in publishers %}
        <div class="col-sm-4" style="padding: 12px !important; padding-top: 0px !important;">
            <a href="{% url 'publisher' publisher.id publisher.slug %}" class="card-link" title="{{ publisher.name }}">
                <div class="info-card">
                    <div class="info-card-body">
                        <div class="center">
                            <div class="itm-img-container">
                                <img src="{{ publisher.logo }}" alt="{{ publisher.name }} logo" class="itm-img">
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}